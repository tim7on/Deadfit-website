---
// src/components/Header.astro
import { appName } from '../consstants/info'

// This server-side check is still perfect.
const isHomepage =
	Astro.url.pathname === '/Deadfit-website' ||
	Astro.url.pathname === '/Deadfit-website/'
---

<header
	class='border-b border-white/10 sticky top-0 z-50 bg-white/80 backdrop-blur-lg'
>
	<div class='max-w-4xl mx-auto px-6 h-20 flex items-center justify-between'>
		<a
			href='/Deadfit-website'
			class='flex items-center gap-2 text-black'
			aria-label='Go to homepage'
			id='logo-link'
			data-is-homepage={isHomepage}
		>
			<img
				src='/Deadfit-website/favicon.svg'
				alt={`${appName} logo`}
				class='w-10 h-10 bg-black p-2 rounded-md'
			/>
			<span class='font-bold text-xl'>{appName}</span>
		</a>
	</div>
</header>

<script>
	document.addEventListener('astro:page-load', () => {
		const logoLink = document.getElementById('logo-link')

		if (!logoLink) return

		logoLink.addEventListener('click', event => {
			// Check the data attribute to see if we're on the homepage
			if (logoLink.dataset.isHomepage === 'true') {
				// We are on the homepage, so prevent the default link behavior
				event.preventDefault()

				// And smoothly scroll to the top of the page
				window.scrollTo({
					top: 0,
					behavior: 'smooth',
				})
			}
			// If not on the homepage, the script does nothing,
			// and the link navigates to the href as usual.
		})
	})
</script>
